(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[707],{75012:function(ve,A,a){"use strict";a.d(A,{EQ:function(){return $},VO:function(){return re},Yu:function(){return J},GP:function(){return U}});var H=a(86582),x=a(91220),X=["https://livedb.asoulfan.com","https://raw.githubusercontent.com/haibara-jian/A-Soul-Data/main","https://cdn.jsdelivr.net/gh/peterpei1186861238/A-Soul-Database@latest"],z=1;A.ZP={RunOnLocal:z!==0,sourceUrl:X[z]};var Q=["scene","staff","type"];function $(l,n){{var h=new Set,u=(0,x.Z)(n.staff),k;try{for(u.s();!(k=u.n()).done;){var _=k.value;if(_!=="F"){var b=(0,x.Z)(n.skin[_]),L;try{for(b.s();!(L=b.n()).done;){var se=L.value;h.add(se)}}catch(f){b.e(f)}finally{b.f()}}}}catch(f){u.e(f)}finally{u.f()}var R=Array.from(h);if(R.length!==0&&!T(l.skin,R))return!1}if(l.platform.indexOf(n.platform)===-1)return!1;var S=(0,x.Z)(Q),V;try{for(S.s();!(V=S.n()).done;){var q=V.value;if(!T(l[q],n[q]))return!1}}catch(f){S.e(f)}finally{S.f()}if(l.titlestr===""&&l.tagstr===""&&l.typestr===""||n.title.toLowerCase().indexOf(l.titlestr.toLowerCase())!==-1)return!0;{var g=(0,x.Z)(n.tags),K;try{for(g.s();!(K=g.n()).done;){var ee=K.value;if(ee.toLowerCase().indexOf(l.tagstr.toLowerCase())!==-1)return!0}}catch(f){g.e(f)}finally{g.f()}}{var j=(0,x.Z)(n.items),F;try{for(j.s();!(F=j.n()).done;){var te=F.value,Z=(0,x.Z)(te.item),N;try{for(Z.s();!(N=Z.n()).done;){var ae=N.value;if(ae[0].toLowerCase().indexOf(l.typestr.toLowerCase())!==-1)return!0}}catch(f){Z.e(f)}finally{Z.f()}}}catch(f){j.e(f)}finally{j.f()}}return!1}function re(l){var n=new XMLHttpRequest;n.open("GET",l,!1),n.send(null);var h;try{h=JSON.parse(n.responseText)}catch(u){h={title:"error"}}finally{return h}}function J(l){var n=new XMLHttpRequest;n.open("GET",l,!1),n.send(null);var h;try{h=n.responseText}catch(u){h="error http"}finally{return h}}function U(l){for(var n=[],h=l.length-1;h>=0;h--)n.push(l[h]);return n}function T(l,n){return l.length+n.length!==Array.from(new Set([].concat((0,H.Z)(l),(0,H.Z)(n)))).length}},41762:function(ve,A,a){"use strict";a.r(A);var H=a(84305),x=a(36674),X=a(11849),z=a(71194),Q=a(50146),$=a(91220),re=a(47673),J=a(4107),U=a(69610),T=a(54941),l=a(81306),n=a(80017),h=a(13062),u=a(71230),k=a(89032),_=a(15746),b=a(402),L=a(61859),se=a(58024),R=a(91894),S=a(7359),V=a(7964),q=a(63185),g=a(9676),K=a(67294),ee=a(67265),j=a(258),F=a(72850),te=a(76570),Z=a(7091),N=a(44378),ae=a(37763),f=a.n(ae),P=a(75012),Ee=a(93709),fe=a(82925),e=a(85893),ye=g.Z.Group,Be=V.Z.Panel,Ie=R.Z.Meta,le=L.Z.Title,De=L.Z.Text,W=P.ZP.sourceUrl,oe={},m=[],ne=[],me=["2021","2022"],_e={};me.forEach(function(r){try{var v=(0,P.VO)(W+"/db/".concat(r,"/search.json")),i=(0,P.VO)(W+"/db/".concat(r,"/main.json")),c=(0,P.VO)(W+"/db/".concat(r,"/indexer.json"));Object.assign(oe,v),m=m.concat(i),ne=ne.concat(c),i.forEach(function(t){t.bv&&(_e[t.bv]=r)})}catch(t){console.error("\u52A0\u8F7D ".concat(r," \u5E74\u6570\u636E\u5931\u8D25:"),t)}});var pe="yellow";function Ce(r){var v=_e[r];if(!v)return console.error("\u672A\u627E\u5230 BV \u5BF9\u5E94\u7684\u5E74\u4EFD:",r),[[]];var i=ne.indexOf(r);if(i===-1||m[i].bv!==r)return console.error("indexer.json \u4E0E mainJson \u4E0D\u5339\u914D\uFF0CBV:",r),[[]];var c=1,t="";try{c=parseInt(m[i].clip),t=m[i].date.split("-")[1]}catch(w){return console.error("\u89E3\u6790 clip \u6216 date \u5931\u8D25\uFF0CBV:",r),[[]]}if(t===""||c===0)return[[]];t.length===1&&(t="0"+t);var s=Array(c).fill().map(function(){return[]});if(c===1){var o="".concat(W,"/db/").concat(v,"/").concat(t,"/srt/").concat(r,".srt");try{for(var d=(0,P.Yu)(o),p=d.split(`
`),D=0;D<p.length-2;D+=4){var O=p[D]+"|"+p[D+1]+"|"+p[D+2];s[0].push(O)}}catch(w){console.error("\u83B7\u53D6\u5B57\u5E55\u5931\u8D25:",o),s[0].push("||")}}else for(var E=1;E<=c;E++){var M="".concat(W,"/db/").concat(v,"/").concat(t,"/srt/").concat(r,"-").concat(E,".srt");try{for(var B=(0,P.Yu)(M),I=B.split(`
`),C=0;C<I.length-2;C+=4){var Y=I[C]+"|"+I[C+1]+"|"+I[C+2];s[E-1].push(Y)}}catch(w){console.error("\u83B7\u53D6\u5B57\u5E55\u5931\u8D25:",M),s[E-1].push("||")}}return s}var G=[];for(var y in m){var ie=void 0,ue=void 0,de=void 0,ce=void 0;try{ie=m[y].title,ue=m[y].bv,de=m[y].date,ce=m[y].time}catch(r){console.error("mainJson parse fault for n: "+y)}G.push({key:y,date:de,hour:ce,bv:ue,title:ie})}G=(0,P.GP)(G);var xe=[{title:"\u65E5\u671F",width:80,dataIndex:"date"},{title:"\u65F6\u95F4",width:80,dataIndex:"hour"},{title:"BV\u53F7",width:80,dataIndex:"bv",render:function(v){return(0,e.jsx)("a",{href:"https://www.bilibili.com/"+v,target:"_blank",onClick:function(c){c.stopPropagation()},children:v})}},{title:"\u6807\u9898",dataIndex:"title",render:function(v){return(0,e.jsx)(u.Z,{children:(0,e.jsx)(_.Z,{md:12,children:v})})}}],Pe=function(r){(0,l.Z)(i,r);var v=(0,n.Z)(i);function i(c){var t;return(0,U.Z)(this,i),t=v.call(this,c),t.state={input:""},t.handleSearch=function(s){t.props.parent.handleSearch(t.state.input)},t.handleClear=function(s){t.setState({input:""});var o=t.props.parent.props.initDatasrc;t.props.parent.setState({dataSource:o,searchWords:"",currentID:0})},t.handleReverse=function(s){t.props.parent.handleReverse()},t}return(0,T.Z)(i,[{key:"render",value:function(){var t=this;return(0,e.jsxs)(R.Z,{onKeyDown:function(o){o.keyCode===13&&t.handleSearch(o)},actions:[(0,e.jsx)(j.Z,{title:"\u9006\u5E8F",onClick:this.handleReverse}),(0,e.jsx)(F.Z,{title:"\u6E05\u9664\u9009\u62E9",onClick:this.handleClear}),(0,e.jsx)(te.Z,{title:"\u641C\u7D22",onClick:this.handleSearch})],children:[(0,e.jsx)(u.Z,{children:(0,e.jsx)(_.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(le,{level:2,children:"\u5B57\u5E55\u5E93\u68C0\u7D22"})})}),(0,e.jsxs)(u.Z,{style:{height:"50px"},children:[(0,e.jsx)(_.Z,{xs:0,md:6}),(0,e.jsx)(_.Z,{xs:24,md:12,align:"middle",children:(0,e.jsx)(J.Z,{style:{borderRadius:"50px"},placeholder:"\u5355\u6761\u5B57\u5E55\u68C0\u7D22\u{1F50D}",onChange:function(o){t.setState({input:o.target.value})},value:this.state.input})}),(0,e.jsx)(_.Z,{md:6,align:"middle"})]})]})}}]),i}(K.Component),Oe=function(r){(0,l.Z)(i,r);var v=(0,n.Z)(i);function i(c){var t;return(0,U.Z)(this,i),t=v.call(this,c),t.state={dataSource:t.props.initDatasrc,isModalVisible:!1,displayBV:"",searchWords:"",currentID:0},t.handleCancel=function(){t.scrollTop(),t.setState({isModalVisible:!1,currentID:0})},t.handleSearch=function(s){t.setState({searchWords:s});var o=[],d=(0,$.Z)(t.props.initDatasrc),p;try{for(d.s();!(p=d.n()).done;){var D=p.value,O=D.bv,E=void 0;try{E=oe[O].srt}catch(M){continue}E.toLowerCase().indexOf(s.toLowerCase())!==-1&&o.push(D)}}catch(M){d.e(M)}finally{d.f()}t.setState({dataSource:o})},t.scrollTop=function(){var s=document.getElementById("Table-top");s.scrollIntoView({behavior:"auto"})},t.scrollNext=function(s){var o=document.getElementsByClassName(s);if(o.length!==0){var d=t.state.currentID;o[d].scrollIntoView({behavior:"smooth"}),d>=o.length-1?t.setState({currentID:0}):t.setState({currentID:d+1})}},t.scrollPre=function(s){var o=document.getElementsByClassName(s);if(o.length!=0){var d=t.state.currentID;o[d].scrollIntoView({behavior:"smooth"}),d<=0?t.setState({currentID:o.length-1}):t.setState({currentID:d-1})}},t}return(0,T.Z)(i,[{key:"handleReverse",value:function(){var t=(0,P.GP)(this.state.dataSource);this.setState({dataSource:t})}},{key:"render",value:function(){var t=this,s=this.state,o=s.isModalVisible,d=s.displayBV,p=s.searchWords,D=[];return d!==""&&(D=Ce(d)),(0,e.jsxs)(ee.ZP,{children:[(0,e.jsx)(Pe,{parent:this}),(0,e.jsx)(u.Z,{style:{marginTop:"20px"},children:(0,e.jsx)(_.Z,{xs:24,md:24,children:(0,e.jsx)(Ee.ZP,{columns:this.props.initColumns,rowKey:"key",dataSource:this.state.dataSource,search:!1,onRow:function(E){return{onClick:function(B){t.setState({isModalVisible:!0,displayBV:E.bv})},style:{cursor:"pointer"}}}})})}),(0,e.jsxs)(Q.Z,{id:"modal",visible:o,maskClosable:!0,onCancel:this.handleCancel,footer:null,children:[(0,e.jsx)(u.Z,{children:(0,e.jsx)(_.Z,{xs:24,md:24,align:"middle",children:(0,e.jsx)(le,{children:"\u5B57\u5E55\u8868"})})}),(0,e.jsx)(u.Z,{children:(0,e.jsx)(_.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollPre("active-highlight")},children:[(0,e.jsx)(Z.Z,{}),"\u4E0A\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsx)(u.Z,{children:(0,e.jsx)(_.Z,{children:(0,e.jsxs)("a",{onClick:function(){return t.scrollNext("active-highlight")},children:[(0,e.jsx)(N.Z,{}),"\u4E0B\u4E00\u6761\u641C\u7D22\u7ED3\u679C"]})})}),(0,e.jsxs)(u.Z,{children:[(0,e.jsx)(_.Z,{xs:3,md:3,children:"\u5E8F\u53F7"}),(0,e.jsx)(_.Z,{xs:10,md:10,children:"\u65F6\u95F4"}),(0,e.jsx)(_.Z,{xs:11,md:11,children:"\u5B57\u5E55"})]}),(0,e.jsx)(u.Z,{style:{borderBottom:"2px solid"},children:(0,e.jsx)(De,{type:"secondary",children:"\u5B57\u5E55\u641C\u7D22\u7ED3\u679C\u4F1A\u4EE5\u9AD8\u4EAE\u5C55\u793A\uFF0C\u7528\u6309\u952E\u4E0A\u4E0B\u79FB\u52A8\u5427\u{1F483}\u{1F483}\u{1F483}"})}),(0,e.jsx)(u.Z,{children:(0,e.jsx)(_.Z,{span:24,style:{height:"500px",overflowY:"scroll"},children:D.map(function(O,E){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(u.Z,{children:(0,e.jsx)(_.Z,{style:{color:"#9AC8E2",borderBottom:"1px solid"},id:"Table-top",children:(0,e.jsx)("a",{target:"_blank",href:"https://www.bilibili.com/"+d+"?p="+(E+1),children:"\u5207\u7247"+(E+1)})})}),(0,e.jsx)(e.Fragment,{children:O.map(function(M){var B=M.split("|"),I=B[0],C=B[1],Y=B[2],w=parseInt(C.split("-->")[0].split(":")[0]),Me=parseInt(C.split("-->")[0].split(":")[1]),ge=parseInt(C.split("-->")[0].split(":")[2].split(",")[0]),je=(w*3600+60*Me+ge)*1e3,Ze="https://www.bilibili.com/"+d+"?p="+(E+1)+"&start_progress="+je,he="";return Y.toLowerCase().indexOf(p.toLowerCase())!==-1&&(he="active-highlight"),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(u.Z,{style:{borderBottom:"1px dashed"},className:he,children:[(0,e.jsx)(_.Z,{xs:3,md:3,style:{color:"#B8A6D9"},children:I}),(0,e.jsx)(_.Z,{xs:10,md:10,children:(0,e.jsx)("a",{target:"_blank",href:Ze,children:C})}),(0,e.jsx)(_.Z,{xs:11,md:11,style:{color:"#E799B0"},children:(0,e.jsx)(f(),{highlightStyle:{backgroundColor:pe,padding:0},searchWords:[p],autoEscape:!0,textToHighlight:Y})})]})})})})]})})})})]})]})}}]),i}(K.Component);A.default=function(){var r={initColumns:xe,initDatasrc:G};return(0,e.jsx)(x.ZP,{locale:fe.Z,children:(0,e.jsx)(Oe,(0,X.Z)({},r))})}}}]);
